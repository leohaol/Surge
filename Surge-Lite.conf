[General]
# > æé«˜å¤„ç† UDP æµé‡ä¼˜å…ˆçº§
udp-priority = true
# > è·³è¿‡ä»£ç†
skip-proxy = 192.168.0.0/24, 10.0.0.0/8, 172.16.0.0/12, 127.0.0.1, localhost, *.local
# > æ’é™¤ç®€å•ä¸»æœºå
exclude-simple-hostnames = true
# > Internet æµ‹è¯• URL
internet-test-url = http://www.aliyun.com
# > ä»£ç†æµ‹é€Ÿ URL
proxy-test-url = http://www.apple.com/
# > æµ‹è¯•è¶…æ—¶ï¼ˆç§’ï¼‰
test-timeout = 3
wifi-assist = true
dns-server = 223.5.5.5, 119.29.29.29
encrypted-dns-server = h3://dns.alidns.com/dns-query
ipv6 = true
allow-wifi-access = true
ipv6-vif = disabled
http-api-tls = true
http-api-web-dashboard = true
all-hybrid = false
# å½“é‡åˆ°REJECTç­–ç•¥æ—¶æ˜¾ç¤ºé”™è¯¯é¡µ
show-error-page-for-reject = true
# IPåœ°å€æœ¬åœ°æ˜ å°„
use-local-host-item-for-proxy = false
allow-hotspot-access = true
include-all-networks = false
include-local-networks = false
geoip-maxmind-url = https://github.com/Masaiki/GeoIP2-CN/raw/release/Country.mmdb
# > è‡ªå®šä¹‰ GeoIP æ•°æ®åº“
external-controller-access = leo@0.0.0.0:6170
http-api = leo@0.0.0.0:6171
# Always Real IP Hosts
# å½“ Surge VIF å¤„ç† DNS é—®é¢˜æ—¶ï¼Œæ­¤é€‰é¡¹è¦æ±‚ Surge è¿”å›ä¸€ä¸ªçœŸæ­£çš„ IP åœ°å€ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª Fake IPã€‚
# DNS æ•°æ®åŒ…å°†è¢«è½¬å‘åˆ°ä¸Šæ¸¸ DNS æœåŠ¡å™¨ã€‚
# ä¾‹å¦‚ç”±äºæ¸¸æˆä¸»æœºä¼šä½¿ç”¨ STUN æŠ€æœ¯è¿›è¡Œ NAT ç©¿é€ï¼Œéœ€è¦è¿›è¡Œä¸€äº›é¢å¤–çš„é…ç½®æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚
wifi-access-socks5-port = 6153
http-listen = 0.0.0.0
socks5-listen = 0.0.0.0

[Ponte]
client-proxy-name = Proxy
server-proxy-name = Proxy

[Proxy Group]
SSID | Global = subnet, default = Foreign orientation, "TYPE:WIFI" = Proxy
SSID | CN = subnet, default = Domestic orientation, "TYPE:WIFI" = DIRECT
Directional flow-free = select, policy-path=å…æµæœºåœº, update-interval=3600, no-alert=0, hidden=1, include-all-proxies=0
Foreign orientation = fallback, policy-regex-filter=é¦™æ¸¯|å°æ¹¾|æ—¥æœ¬|æ–°åŠ å¡|ç¾å›½, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=Directional flow-free
Domestic orientation = fallback, policy-regex-filter=ç”µä¿¡, no-alert=0, hidden=1, include-all-proxies=0, include-other-group=Directional flow-free
Proxy = fallback, HK, TW, JP, SG, US, hidden=0, no-alert=0, include-all-proxies=0
WD = select, policy-path=æœºåœº, update-interval=3600, no-alert=0, hidden=0, include-all-proxies=0
HK = load-balance, include-other-group=WD, policy-regex-filter=(ğŸ‡­ğŸ‡°)|(æ¸¯)|(Hong)|(HK), persistent=1, no-alert=0, hidden=1, include-all-proxies=0
TW = load-balance, include-other-group=WD, policy-regex-filter=(ğŸ‡¨ğŸ‡³)|(å°)|(Tai)|(TW), persistent=1, no-alert=0, hidden=1, include-all-proxies=0
JP = load-balance, include-other-group=WD, policy-regex-filter=(ğŸ‡¯ğŸ‡µ)|(æ—¥)|(Japan)|(JP), persistent=1, no-alert=0, hidden=1, include-all-proxies=0
SG = load-balance, include-other-group=WD, policy-regex-filter=(ğŸ‡¸ğŸ‡¬)|(æ–°)|(Singapore)|(SG), persistent=1, no-alert=0, hidden=1, include-all-proxies=0
US = load-balance, include-other-group=WD, policy-regex-filter=(ğŸ‡ºğŸ‡¸)|(ç¾)|(States)|(US), persistent=1, no-alert=0, hidden=1, include-all-proxies=0

[Rule]
OR,((SUBNET,SSID:Linksys)),DEVICE:MACMINI // House
AND,((SUBNET,TYPE:WIFI), (IP-CIDR,192.168.0.0/16,no-resolve)),DEVICE:MACMINI // Wi-Fi
AND,((SUBNET,TYPE:CELLULAR), (IP-CIDR,192.168.0.0/16,no-resolve)),DEVICE:MACMINI // CELLULAR
RULE-SET,https://raw.githubusercontent.com/leohaol/Surge/main/All-in-one-to-Ad-Rule.list,REJECT-TINYGIF
RULE-SET,https://raw.githubusercontent.com/Blankwonder/surge-list/master/blocked.list,SSID | Global
OR,((DOMAIN,testflight.apple.com), (DOMAIN,beta.apple.com), (DOMAIN-KEYWORD,testflight)),Proxy // TestFlight
RULE-SET,https://raw.githubusercontent.com/Blankwonder/surge-list/master/apple.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/Blankwonder/surge-list/master/netflix.list,SSID | Global
RULE-SET,https://raw.githubusercontent.com/Blankwonder/surge-list/master/telegram.list,SSID | Global
OR,((RULE-SET,SYSTEM), (RULE-SET,LAN)),DIRECT
GEOIP,CN,DIRECT
FINAL,SSID | Global,dns-failed

[Host]
*qq.com = server:119.29.29.29
*.tencent.com = server:119.29.29.29
*.weixin.com = server:119.29.29.29
weixin.com = server:119.29.29.29
*testflight.apple.com = server:8.8.4.4
*.lan = server:syslib

[SSID Setting]
SSID:xiaomi cellular-fallback=off
TYPE:WIFI cellular-fallback=wifi-assist, dns-server=223.5.5.5, encrypted-dns-server=h3://dns.alidns.com/dns-query

[MITM]
skip-server-cert-verify = true
tcp-connection = true
h2 = true
ca-keystore-name = CA
# ca-passphrase = CEBBA58A

