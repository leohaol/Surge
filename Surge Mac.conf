[General]
# > è·³è¿‡ä»£ç†
skip-proxy = 192.168.0.0/24, 10.0.0.0/8, 172.16.0.0/12, 127.0.0.1, localhost, *.local
# > æ’é™¤ç®€å•ä¸»æœºå
exclude-simple-hostnames = true
# > Internet æµ‹è¯• URL
internet-test-url = http://www.aliyun.com
# > ä»£ç†æµ‹é€Ÿ URL
proxy-test-url = http://www.apple.com/
# > æµ‹è¯•è¶…æ—¶ï¼ˆç§’ï¼‰
test-timeout = 3
# å¢å¼ºç‰ˆ Wi-Fi åŠ©ç†
# Surge ä¼šåœ¨ Wi-Fi ç½‘ç»œä¸ä½³æ—¶å°è¯•ä½¿ç”¨æ•°æ®ç½‘ç»œå»ºç«‹è¿æ¥ã€‚è¯¥åŠŸèƒ½å°†å¯¹æ‰€æœ‰è¿æ¥ç”Ÿæ•ˆï¼Œè¯·ä»…å½“ä½¿ç”¨ä¸é™é‡çš„æ•°æ®æµé‡æ—¶å¼€å¯ã€‚
wifi-assist = true
# DNSç›¸å…³è®¾ç½®
# ä¼ ç»Ÿ DNS æœåŠ¡å™¨è®¾ç½®
ipv6 = true
# åŠ å¯† DNS æœåŠ¡å™¨è®¾ç½®
allow-wifi-access = true
# æ˜¯å¦å¯åŠ¨å®Œæ•´çš„ IPv6 æ”¯æŒ (é»˜è®¤å€¼: false)å‚æ•°ï¼štrueï¼šå¼€å¯ï¼Œfalseï¼šå…³é—­
ipv6-vif = auto
# Wi-Fi è®¿é—®
# Surge å¯ä»¥ä½œä¸º HTTP/SOCKS5 ä»£ç†æœåŠ¡å™¨å‘ Wi-Fi ç½‘ç»œä¸‹çš„å…¶ä»–è®¾å¤‡æä¾›æœåŠ¡å™¨
http-api-tls = true
# å…è®¸ IPv6 é€šè¿‡ Surge VIFã€‚å½“å¸Œæœ› Surge å¤„ç†è¿æ¥åˆ° IPv6 åœ°å€çš„åŸå§‹ TCP è¿æ¥æ—¶éå¸¸æœ‰ç”¨ã€‚å¯é€‰é¡¹ï¼štrueï¼Œfalseï¼Œautoï¼Œalways
http-api-web-dashboard = true
# ä½¿ç”¨HTTPSæ›¿ä»£HTTPåè®®ï¼Œéœ€è¦å…ˆé…ç½®Mitmçš„CAè¯ä¹¦ï¼ŒåŒæ—¶éœ€è¦åœ¨å®¢æˆ·ç«¯è®¾å¤‡ä¸Šæ‰‹åŠ¨å®‰è£…å¹¶ä¿¡ä»»CAè¯ä¹¦
all-hybrid = false
# é¡µé¢æ§åˆ¶å™¨ï¼šé€šè¿‡é¡µé¢æ§åˆ¶Surgeï¼Œ Safariè¾“å…¥127.0.0.1:6171,å¡«å…¥HTTP-APIå¯†ç å³å¯
show-error-page-for-reject = true
# è¯¥é€‰é¡¹å¯æ˜¾è‘—æ”¹å–„åœ¨å¼± Wi-Fi å’Œç½‘ç»œåˆ‡æ¢æ—¶çš„ç½‘ç»œä½“éªŒã€‚è¯¥é€‰é¡¹å¯¹æ‰€æœ‰ TCP è¿æ¥å’Œ DNS æŸ¥è¯¢ç”Ÿæ•ˆã€‚è¯·ä»…å½“ä½¿ç”¨ä¸é™é‡çš„æ•°æ®æµé‡å¥—é¤æ—¶å¼€å¯ã€‚
use-local-host-item-for-proxy = false
# å½“é‡åˆ°REJECTç­–ç•¥æ—¶æ˜¾ç¤ºé”™è¯¯é¡µ
allow-hotspot-access = true
# IPåœ°å€æœ¬åœ°æ˜ å°„
include-all-networks = false
# å…è®¸çƒ­ç‚¹å…±äº«
include-local-networks = false
# è·¯ç”±é˜²ç«å¢™
# åŒ…å«æ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚
geoip-maxmind-url = https://github.com/Masaiki/GeoIP2-CN/raw/release/Country.mmdb
# åŒ…å«æœ¬åœ°ç½‘ç»œè¯·æ±‚
external-controller-access = leo@0.0.0.0:6170
# GeoIP æ•°æ®åº“ï¼Œé»˜è®¤ä½¿ç”¨surgeè‡ªå¸¦.Surge é»˜è®¤æ˜¯ä½¿ç”¨ç”± MaxMind åˆ›å»ºçš„ GeoLite2 æ•°æ®åº“ï¼Œä½†æ˜¯å®ƒçš„ä¿¡æ¯ä¸æ˜¯é‚£ä¹ˆçš„å‡†ç¡®ï¼Œä» Surge iOS 4.5.0 å¼€å§‹å¯ä»¥è‡ªå®šä¹‰ GeoIP æ•°æ®çš„ URLï¼Œéœ€è¦ä¸º MaxMind çš„æ ¼å¼ã€‚
# å¦‚æœæƒ³ä½¿ç”¨ç¬¬ä¸‰æ–¹GeoIPï¼Œä¸‹é¢ä¸¤ä¸ªäºŒé€‰ä¸€å³å¯ï¼Œä¹Ÿå¯è‡ªè¡Œæ›´æ¢ä¸ºå…¶å®ƒç¬¬ä¸‰æ–¹
# åœ¨é…ç½®ä¿¡æ¯è®¾ç½®å¥½ geoip-maxmind-url åå»ºè®®åœ¨å›¾å½¢ç•Œé¢æ‰“å¼€ã€Œè‡ªåŠ¨æ›´æ–°ã€å¼€å…³ï¼ˆæˆ–è€…ç›´æ¥åœ¨å›¾å½¢ç•Œé¢ä¸­è®¾ç½® URL åŠå¼€å…³ï¼‰
http-api = leo@0.0.0.0:6171
# è¿œç¨‹æ§åˆ¶å™¨
# å…è®¸å¤–éƒ¨æ§åˆ¶å™¨è®¿é—® Surgeï¼ŒSurge Dashboard æˆ– Surge CLI è¿›è¡Œç®¡ç†æ§åˆ¶
# é»˜è®¤ä»…å…è®¸å¤–éƒ¨æ§åˆ¶å™¨é€šè¿‡ USB è¿›è¡Œæ§åˆ¶ã€‚å¦‚æœæƒ³è¦å…è®¸ç”± Wi-Fi æ§åˆ¶å¯ä»¥å°† 127.0.0.1 æ”¹ä¸º 0.0.0.0
wifi-access-socks5-port = 6153
loglevel = notify
# Always Real IP Hosts
# å½“ Surge VIF å¤„ç† DNS é—®é¢˜æ—¶ï¼Œæ­¤é€‰é¡¹è¦æ±‚ Surge è¿”å›ä¸€ä¸ªçœŸæ­£çš„ IP åœ°å€ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª Fake IPã€‚
# DNS æ•°æ®åŒ…å°†è¢«è½¬å‘åˆ°ä¸Šæ¸¸ DNS æœåŠ¡å™¨ã€‚
# ä¾‹å¦‚ç”±äºæ¸¸æˆä¸»æœºä¼šä½¿ç”¨ STUN æŠ€æœ¯è¿›è¡Œ NAT ç©¿é€ï¼Œéœ€è¦è¿›è¡Œä¸€äº›é¢å¤–çš„é…ç½®æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚
# SOCKS5 æœåŠ¡ç«¯å£ (é»˜è®¤å€¼: 6153)
udp-priority = true
# é«˜çº§
# æ—¥å¿—ç­‰çº§: warning, notify, info, verbose (é»˜è®¤å€¼: notify)
# âš ï¸ ä¸å»ºè®®åœ¨æ—¥å¸¸ä½¿ç”¨ä¸­å¯ç”¨ verboseï¼Œå› ä¸ºè¿™ä¼šä¸¥é‡é™ä½æ€§èƒ½ã€‚
read-etc-hosts = true
# Wi-Fi è®¿é—®
# Surge å¯ä»¥ä½œä¸º HTTP/SOCKS5 ä»£ç†æœåŠ¡å™¨å‘ Wi-Fi ç½‘ç»œä¸‹çš„å…¶ä»–è®¾å¤‡æä¾›æœåŠ¡å™¨
dns-server = 223.5.5.5, 119.29.29.29, system
# Surge Mac ä¾›å¤–ç½‘è®¿é—®çš„æœåŠ¡ç«¯å£
# HTTP æœåŠ¡ç«¯å£ (é»˜è®¤å€¼: 6152)
# SOCKS5 æœåŠ¡ç«¯å£ (é»˜è®¤å€¼: 6153)
# å¼€å¯åä¼šæé«˜å¤„ç† UDP æµé‡çš„ä¼˜å…ˆçº§ï¼Œå½“ç³»ç»Ÿè´Ÿè½½é«˜æ—¶ä¼šæœ‰æ¯”è¾ƒæ˜æ˜¾çš„ä½œç”¨ (å¦‚é«˜æ€§èƒ½è”æœºæ¸¸æˆ)
http-listen = 0.0.0.0
socks5-listen = 0.0.0.0
encrypted-dns-server = h3://dns.alidns.com/dns-query

[Ponte]
client-proxy-name = Proxy
server-proxy-name = Proxy

[Proxy Group]
Proxy = fallback, Flowercloud_0.2, HK, TW, JP, SG, US
HK = fallback, include-other-group=æœºåœºä¸€, policy-regex-filter=(ğŸ‡­ğŸ‡°)|(æ¸¯)|(Hong)|(HK)
TW = fallback, include-other-group=æœºåœºä¸€, policy-regex-filter=(ğŸ‡¨ğŸ‡³)|(å°)|(Tai)|(TW)
JP = fallback, include-other-group=æœºåœºä¸€, policy-regex-filter=(ğŸ‡¯ğŸ‡µ)|(æ—¥)|(Japan)|(JP)
SG = fallback, include-other-group=æœºåœºä¸€, policy-regex-filter=(ğŸ‡¸ğŸ‡¬)|(æ–°)|(Singapore)|(SG)
US = fallback, include-other-group=æœºåœºä¸€, policy-regex-filter=(ğŸ‡ºğŸ‡¸)|(ç¾)|(States)|(US)
æœºåœºä¸€ = fallback, policy-path=https://api.huacloud.xyz/sub?target=surge&ver=4&list=true&emoji=true&tfo=true&udp=true&url=https%3A%2F%2Fapi.flowercloud.xyz%2Fosubscribe.php%3Fsid%3D79146%26token%3D86YsB83NeQVt%26sip002%3D1, update-interval=0
Flowercloud_0.2 = fallback, include-other-group=æœºåœºä¸€, policy-regex-filter=å®éªŒæ€§, no-alert=0, hidden=0, include-all-proxies=0

[Rule]
OR,((DOMAIN-SET,https://anti-ad.net/surge2.txt), (RULE-SET,https://raw.githubusercontent.com/leohaol/Surge/main/MyBlockAds.list), (RULE-SET,https://raw.githubusercontent.com/leohaol/Surge/main/All-in-one-to-Ad-Rule.list)),REJECT
RULE-SET,blocked.list,Proxy
OR,((DOMAIN-SUFFIX,dl.nssurge.com), (DOMAIN,www.nssurge.com)),Proxy // surge
OR,((DOMAIN-KEYWORD,olddddd.com), (RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/NivodTV/NivodTV.list)),SG
SRC-IP,192.168.79.108,DIRECT // å°ç±³æ™ºèƒ½æ’å¤´
RULE-SET,apple.list,DIRECT
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Steam/Steam.list,DIRECT // Steam
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Microsoft/Microsoft.list,US
OR,((RULE-SET,SYSTEM), (RULE-SET,LAN), (GEOIP,CN)),DIRECT
FINAL,Proxy,dns-failed

[Host]
*.tencent.com = server:119.29.29.29
*.weixin.com = server:119.29.29.29
weixin.com = server:119.29.29.29
*testflight.apple.com = server:8.8.4.4
*.lan = server:syslib

[MITM]
skip-server-cert-verify = true
tcp-connection = true
h2 = true
ca-keystore-name = CA
# ca-passphrase = CEBBA58A

