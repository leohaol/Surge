[General]
# > è·³è¿‡ä»£ç†
skip-proxy = 192.168.0.0/24, 10.0.0.0/8, 172.16.0.0/12, 127.0.0.1, localhost, *.local
# > æŽ’é™¤ç®€å•ä¸»æœºå
exclude-simple-hostnames = true
# > Internet æµ‹è¯• URL
internet-test-url = http://www.aliyun.com
# > ä»£ç†æµ‹é€Ÿ URL
proxy-test-url = http://www.apple.com/
# > æµ‹è¯•è¶…æ—¶ï¼ˆç§’ï¼‰
test-timeout = 3
# å¢žå¼ºç‰ˆ Wi-Fi åŠ©ç†
# Surge ä¼šåœ¨ Wi-Fi ç½‘ç»œä¸ä½³æ—¶å°è¯•ä½¿ç”¨æ•°æ®ç½‘ç»œå»ºç«‹è¿žæŽ¥ã€‚è¯¥åŠŸèƒ½å°†å¯¹æ‰€æœ‰è¿žæŽ¥ç”Ÿæ•ˆï¼Œè¯·ä»…å½“ä½¿ç”¨ä¸é™é‡çš„æ•°æ®æµé‡æ—¶å¼€å¯ã€‚
wifi-assist = true
# DNSç›¸å…³è®¾ç½®
# ä¼ ç»Ÿ DNS æœåŠ¡å™¨è®¾ç½®
dns-server = 223.5.5.5, 119.29.29.29
# åŠ å¯† DNS æœåŠ¡å™¨è®¾ç½®
encrypted-dns-server = h3://dns.alidns.com/dns-query
# æ˜¯å¦å¯åŠ¨å®Œæ•´çš„ IPv6 æ”¯æŒ (é»˜è®¤å€¼: false)å‚æ•°ï¼štrueï¼šå¼€å¯ï¼Œfalseï¼šå…³é—­
ipv6 = false
# Wi-Fi è®¿é—®
# Surge å¯ä»¥ä½œä¸º HTTP/SOCKS5 ä»£ç†æœåŠ¡å™¨å‘ Wi-Fi ç½‘ç»œä¸‹çš„å…¶ä»–è®¾å¤‡æä¾›æœåŠ¡å™¨
allow-wifi-access = false
# å…è®¸ IPv6 é€šè¿‡ Surge VIFã€‚å½“å¸Œæœ› Surge å¤„ç†è¿žæŽ¥åˆ° IPv6 åœ°å€çš„åŽŸå§‹ TCP è¿žæŽ¥æ—¶éžå¸¸æœ‰ç”¨ã€‚å¯é€‰é¡¹ï¼štrueï¼Œfalseï¼Œautoï¼Œalways
ipv6-vif = auto
# ä½¿ç”¨HTTPSæ›¿ä»£HTTPåè®®ï¼Œéœ€è¦å…ˆé…ç½®Mitmçš„CAè¯ä¹¦ï¼ŒåŒæ—¶éœ€è¦åœ¨å®¢æˆ·ç«¯è®¾å¤‡ä¸Šæ‰‹åŠ¨å®‰è£…å¹¶ä¿¡ä»»CAè¯ä¹¦
http-api-tls = false
# é¡µé¢æŽ§åˆ¶å™¨ï¼šé€šè¿‡é¡µé¢æŽ§åˆ¶Surgeï¼Œ Safariè¾“å…¥127.0.0.1:6171,å¡«å…¥HTTP-APIå¯†ç å³å¯
http-api-web-dashboard = true
# è¯¥é€‰é¡¹å¯æ˜¾è‘—æ”¹å–„åœ¨å¼± Wi-Fi å’Œç½‘ç»œåˆ‡æ¢æ—¶çš„ç½‘ç»œä½“éªŒã€‚è¯¥é€‰é¡¹å¯¹æ‰€æœ‰ TCP è¿žæŽ¥å’Œ DNS æŸ¥è¯¢ç”Ÿæ•ˆã€‚è¯·ä»…å½“ä½¿ç”¨ä¸é™é‡çš„æ•°æ®æµé‡å¥—é¤æ—¶å¼€å¯ã€‚
all-hybrid = false
# å½“é‡åˆ°REJECTç­–ç•¥æ—¶æ˜¾ç¤ºé”™è¯¯é¡µ
show-error-page-for-reject = true
# IPåœ°å€æœ¬åœ°æ˜ å°„
use-local-host-item-for-proxy = false
# å…è®¸çƒ­ç‚¹å…±äº«
allow-hotspot-access = false
# è·¯ç”±é˜²ç«å¢™
# åŒ…å«æ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚
include-all-networks = false
# åŒ…å«æœ¬åœ°ç½‘ç»œè¯·æ±‚
include-local-networks = false
# GeoIP æ•°æ®åº“ï¼Œé»˜è®¤ä½¿ç”¨surgeè‡ªå¸¦.Surge é»˜è®¤æ˜¯ä½¿ç”¨ç”± MaxMind åˆ›å»ºçš„ GeoLite2 æ•°æ®åº“ï¼Œä½†æ˜¯å®ƒçš„ä¿¡æ¯ä¸æ˜¯é‚£ä¹ˆçš„å‡†ç¡®ï¼Œä»Ž Surge iOS 4.5.0 å¼€å§‹å¯ä»¥è‡ªå®šä¹‰ GeoIP æ•°æ®çš„ URLï¼Œéœ€è¦ä¸º MaxMind çš„æ ¼å¼ã€‚
# å¦‚æžœæƒ³ä½¿ç”¨ç¬¬ä¸‰æ–¹GeoIPï¼Œä¸‹é¢ä¸¤ä¸ªäºŒé€‰ä¸€å³å¯ï¼Œä¹Ÿå¯è‡ªè¡Œæ›´æ¢ä¸ºå…¶å®ƒç¬¬ä¸‰æ–¹
# åœ¨é…ç½®ä¿¡æ¯è®¾ç½®å¥½ geoip-maxmind-url åŽå»ºè®®åœ¨å›¾å½¢ç•Œé¢æ‰“å¼€ã€Œè‡ªåŠ¨æ›´æ–°ã€å¼€å…³ï¼ˆæˆ–è€…ç›´æŽ¥åœ¨å›¾å½¢ç•Œé¢ä¸­è®¾ç½® URL åŠå¼€å…³ï¼‰
geoip-maxmind-url = https://raw.githubusercontent.com/Loyalsoldier/geoip/release/Country.mmdb
# è¿œç¨‹æŽ§åˆ¶å™¨
# å…è®¸å¤–éƒ¨æŽ§åˆ¶å™¨è®¿é—® Surgeï¼ŒSurge Dashboard æˆ– Surge CLI è¿›è¡Œç®¡ç†æŽ§åˆ¶
# é»˜è®¤ä»…å…è®¸å¤–éƒ¨æŽ§åˆ¶å™¨é€šè¿‡ USB è¿›è¡ŒæŽ§åˆ¶ã€‚å¦‚æžœæƒ³è¦å…è®¸ç”± Wi-Fi æŽ§åˆ¶å¯ä»¥å°† 127.0.0.1 æ”¹ä¸º 0.0.0.0
external-controller-access = leo@127.0.0.1:6170
http-api = leo@127.0.0.1:6171
# Always Real IP Hosts
# å½“ Surge VIF å¤„ç† DNS é—®é¢˜æ—¶ï¼Œæ­¤é€‰é¡¹è¦æ±‚ Surge è¿”å›žä¸€ä¸ªçœŸæ­£çš„ IP åœ°å€ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª Fake IPã€‚
# DNS æ•°æ®åŒ…å°†è¢«è½¬å‘åˆ°ä¸Šæ¸¸ DNS æœåŠ¡å™¨ã€‚
# ä¾‹å¦‚ç”±äºŽæ¸¸æˆä¸»æœºä¼šä½¿ç”¨ STUN æŠ€æœ¯è¿›è¡Œ NAT ç©¿é€ï¼Œéœ€è¦è¿›è¡Œä¸€äº›é¢å¤–çš„é…ç½®æ‰èƒ½æ­£å¸¸å·¥ä½œã€‚
# SOCKS5 æœåŠ¡ç«¯å£ (é»˜è®¤å€¼: 6153)
wifi-access-socks5-port = 6153
# é«˜çº§
# æ—¥å¿—ç­‰çº§: warning, notify, info, verbose (é»˜è®¤å€¼: notify)
# âš ï¸ ä¸å»ºè®®åœ¨æ—¥å¸¸ä½¿ç”¨ä¸­å¯ç”¨ verboseï¼Œå› ä¸ºè¿™ä¼šä¸¥é‡é™ä½Žæ€§èƒ½ã€‚
loglevel = notify
# Wi-Fi è®¿é—®
# Surge å¯ä»¥ä½œä¸º HTTP/SOCKS5 ä»£ç†æœåŠ¡å™¨å‘ Wi-Fi ç½‘ç»œä¸‹çš„å…¶ä»–è®¾å¤‡æä¾›æœåŠ¡å™¨
http-listen = 0.0.0.0:6152
# Surge Mac ä¾›å¤–ç½‘è®¿é—®çš„æœåŠ¡ç«¯å£
# HTTP æœåŠ¡ç«¯å£ (é»˜è®¤å€¼: 6152)
socks5-listen = 0.0.0.0:6153
# SOCKS5 æœåŠ¡ç«¯å£ (é»˜è®¤å€¼: 6153)
udp-priority = false
# å¼€å¯åŽä¼šæé«˜å¤„ç† UDP æµé‡çš„ä¼˜å…ˆçº§ï¼Œå½“ç³»ç»Ÿè´Ÿè½½é«˜æ—¶ä¼šæœ‰æ¯”è¾ƒæ˜Žæ˜¾çš„ä½œç”¨ (å¦‚é«˜æ€§èƒ½è”æœºæ¸¸æˆ)
# æ–°å¢žä¸¤ä¸ªå‚æ•°ï¼ˆéœ€è¦ iOS 16.4 ä»¥ä¸Šç‰ˆæœ¬ï¼‰
# include-apns ï¼šè®© Surge æŽ¥ç®¡ Apple Push Notification service (APNs) ç›¸å…³è¯·æ±‚
# include-cellular-servicesï¼šè®© Surge æŽ¥ç®¡ VoLTE, Wi-Fi Calling, IMS, MMS, Visual Voicemail ç­‰ç›¸å…³æ•°æ®ç½‘ç»œæœåŠ¡çš„è¯·æ±‚
# è¯·æ³¨æ„ï¼Œè¿™ä¸¤ä¸ªé€‰é¡¹ä»…åº”åœ¨æœ‰ç‰¹æ®Šéœ€æ±‚æ—¶å¼€å¯ã€‚æ­£å¸¸æƒ…å†µä¸‹ä¸åº”è¯¥å¼€å¯ä»¥é¿å…äº§ç”Ÿé—®é¢˜ã€‚
udp-policy-not-supported-behaviour = DIRECT

[Ponte]
server-proxy-name = Proxy
client-proxy-name = Proxy

[Proxy Group]
Proxy = fallback, policy-regex-filter=å®žéªŒæ€§, no-alert=0, hidden=0, include-all-proxies=0, include-other-group=æœºåœºä¸€
Ponte = select, DEVICE:MACMINI, DIRECT, no-alert=0, hidden=0, include-all-proxies=0
HK = fallback, include-other-group=æœºåœºä¸€, policy-regex-filter=(ðŸ‡­ðŸ‡°)|(æ¸¯)|(Hong)|(HK), no-alert=0, hidden=1, include-all-proxies=0
TW = fallback, include-other-group=æœºåœºä¸€, policy-regex-filter=(ðŸ‡¨ðŸ‡³)|(å°)|(Tai)|(TW), no-alert=0, hidden=1, include-all-proxies=0
JP = fallback, include-other-group=æœºåœºä¸€, policy-regex-filter=(ðŸ‡¯ðŸ‡µ)|(æ—¥)|(Japan)|(JP), no-alert=0, hidden=1, include-all-proxies=0
SG = fallback, include-other-group=æœºåœºä¸€, policy-regex-filter=(ðŸ‡¸ðŸ‡¬)|(æ–°)|(Singapore)|(SG), no-alert=0, hidden=1, include-all-proxies=0
US = fallback, include-other-group=æœºåœºä¸€, policy-regex-filter=(ðŸ‡ºðŸ‡¸)|(ç¾Ž)|(States)|(US), no-alert=0, hidden=1, include-all-proxies=0
æœºåœºä¸€ = select, policy-path=https://api.huacloud.xyz/sub?target=surge&ver=4&list=true&emoji=true&tfo=true&udp=true&url=https%3A%2F%2Fapi.flowercloud.xyz%2Fosubscribe.php%3Fsid%3D79146%26token%3D86YsB83NeQVt%26sip002%3D1, update-interval=21600, no-alert=0, hidden=1, include-all-proxies=0

[Rule]
OR,((RULE-SET,All-in-one-to-Ad-Rule.list), (RULE-SET,MyBlockAds.list)),REJECT // AD
AND,((SUBNET,SSID:Xiaomi), (IP-CIDR,192.168.0.0/16,no-resolve)),DIRECT // MI WI-FI
AND,((NOT,((SUBNET,SSID:Linksys))), (IP-CIDR,192.168.0.0/16,no-resolve)),DEVICE:MACMINI // Linksys Ponte
OR,((RULE-SET,blocked.list)),Proxy // éžè§„åˆ™
RULE-SET,telegram.list,Proxy
OR,((RULE-SET,cn.list), (RULE-SET,apple.list)),DIRECT
OR,((RULE-SET,SYSTEM), (RULE-SET,LAN), (GEOIP,CN)),DIRECT
FINAL,Proxy,dns-failed

[Host]
# *.tencent.com = server:119.29.29.29
*.weixin.com = server:119.29.29.29
weixin.com = server:119.29.29.29
*testflight.apple.com = server:8.8.4.4
*.lan = server:syslib

[URL Rewrite]
^https:\/\/oneapph5\.dongfeng-nissan\.com\.cn\/mb-gw\/ly-mp-iov-forwarding-service\/iov\/login\/advertapp\/getRecommendcar - reject
^https:\/\/oneapph5\.dongfeng-nissan\.com\.cn\/mb-gw\/dndc-gateway\/nissan\/platform\/api\/channel-page\/info\? - reject

[Map Local]
# > æ—¥äº§æ™ºè”APP å¼€å±å¹¿å‘Š
^https:\/\/oneapph5\.dongfeng-nissan\.com\.cn\/mb-gw\/vmsp-discover\/rest\/business-service\/v1\/advert\/advertinfo data="https://raw.githubusercontent.com/mieqq/mieqq/master/reject-dict.json"
# > å½©äº‘å¤©æ°”
# ^https?:\/\/wrapper\.cyapi\.cn\/v1\/activity? data="https://raw.githubusercontent.com/mieqq/mieqq/master/reject-200.txt"
# > spotify éŸ³ä¹
^https?:\/\/spclient\.wg\.spotify\.com\/(ad-logic|ads|.+ad_slot|.+banners|.+canvases|.+cards|.+crashlytics|.+doubleclick.net|.+enabled-tracks|.+event|.+sponsored|.+promoted|.+promoted_offer) data="https://raw.githubusercontent.com/mieqq/mieqq/master/reject-img.gif"
# > ç½‘æ˜“èœ—ç‰›è¯»ä¹¦
^https?:\/\/easyreadfs\.nosdn\.127\.net\/ad-material\/ data="https://raw.githubusercontent.com/mieqq/mieqq/master/reject-200.txt"
^https?:\/\/p\.du\.163\.com\/ad\/ data="https://raw.githubusercontent.com/mieqq/mieqq/master/reject-200.txt"

[SSID Setting]
SSID:Linksys cellular-fallback=off
TYPE:WIFI

[MITM]
skip-server-cert-verify = true
tcp-connection = true
h2 = true
hostname = *.amap.com, easyreadfs.nosdn.127.net, spclient.wg.spotify.com, oneapph5.dongfeng-nissan.com.cn
# ca-passphrase = CEBBA58A
ca-keystore-name = CA

[Script]
æ²¹ä»· = type=cron,cronexp=0 8 * * *,wake-system=1,timeout=120,script-path=https://raw.githubusercontent.com/Keywos/rule/main/JS/surgepushYJ.js,script-update-interval=0
é«˜å¾·æ‰“è½¦ = type=cron,cronexp=19 9 * * *,script-path=https://raw.githubusercontent.com/wf021325/qx/master/task/ampDache.js,timeout=60,wake-system=1,script-update-interval=0

